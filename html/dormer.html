<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,
      shrink-to-fit=no">
    <script id="testscript" src="./barclays.js" type="text/javascript"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

    <title>Dormer Page</title>
</head>

<body>
    <h1>Dormer Loft Conversion</h1>

    <div class="container">
        <img src="dormer.png" alt="Dormer" class="center" height="400" width="400">

        <p>
            This contract is part natural language and part smart contract.
        </p>

        <video id="video" width="320" height="240" autoplay></video>
        <p id="filesInfo" />

    </div>

    <script>
        // Grab elements, create settings, etc.
        var video = document.getElementById('video');
        // Get access to the camera!
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            // Not adding `{ audio: true }` since we only want video now
            navigator.mediaDevices.getUserMedia({
                video: true
            }).then(function(stream) {
                //video.src = window.URL.createObjectURL(stream);
                video.srcObject = stream;
                video.play();
            });
        }

        // Elements for taking the snapshot

        // Trigger photo take
        const photo = (id) => {
            var canvas = document.getElementById('img' + id);
            var context = canvas.getContext('2d');
            //context.scale(.05, .05)

            //var img = document.getElementById('img' + id);
            context.drawImage(video, 0, 0, 50, 50);

            var dataURL = canvas.toDataURL("image/jpeg");

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(ev) {
                document.getElementById('filesInfo').innerHTML = 'Done!';
            };

            xhr.open('POST', 'http://ec2-54-174-166-252.compute-1.amazonaws.com:3000/api/saveipfsimage', true);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            var data = 'image=' + dataURL;
            xhr.send(data);
        };
    </script>
    <div class="container">
        <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
                <input type="checkbox" class="form-check-input" id="exampleCheck1"></div>
            <div class="col">
                <label class="form-check-label" for="exampleCheck1" onclick="photo(1)">Inspection of roof space - architect or surveyor visit</label>
            </div>
            <div class="col-sm-4"><canvas id="img1" width="50" height="50">
          </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
        </div>
        <div class="row" style="margin-bottom: 10px">
          <div class="col-sm-1">
            <input type="checkbox" class="form-check-input"
              id="exampleCheck2">
            </div>
            <div
              class="col"><label class="form-check-label"
              for="exampleCheck2" onclick="photo(2)">An
              architect or surveyor confirms suitability</label></div><div
            class="col-sm-4"><canvas id="img2"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck3"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck3" onclick="photo(3)">Plans
              are made - DIY considered - load analysis of the building</label></div><div
            class="col-sm-4"><canvas
              id="img3" width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck4"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck4" onclick="photo(4)">Clear
              loft - building control approval obtained</label></div><div
            class="col-sm-4"><canvas id="img4"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck5"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck5" onclick="photo(5)">Rewiring
              is assessed - rerouted could be needed</label></div><div
            class="col-sm-4"><canvas id="img5"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck6"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck6" onclick="photo(6)">Floor
              insulation - add insulation</label></div><div class="col-sm-4"><canvas
              id="img6" width="50"
              height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck7"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck7" onclick="photo(7)">Rafters
              reinforced</label></div><div class="col-sm-4"><canvas id="img7"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck8"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck8" onclick="photo(8)">Dormer
              installation</label></div><div class="col-sm-4"><canvas id="img8"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck9"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck9" onclick="photo(9)">Rooflight
              installation</label></div><div class="col-sm-4"><canvas id="img9"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck10"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck10" onclick="photo(10)">Staircase
              installation</label></div><div class="col-sm-4"><canvas id="img10"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck11"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck11" onclick="photo(11)">Dormers
              tiled and vents fitted</label></div><div class="col-sm-4"><canvas
              id="img11" width="50"
              height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck12"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck12" onclick="photo(12)">Roof
              insulation</label></div><div class="col-sm-4"><canvas id="img12"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck13"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck13" onclick="photo(13)">Partition
              walls erected</label></div><div class="col-sm-4"><canvas id="img13"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck14"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck14" onclick="photo(14)">Wall
              plates and first fix</label></div><div class="col-sm-4"><canvas
              id="img14" width="50"
              height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck15"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck15" onclick="photo(15)">Electrics
              upgrade</label></div><div class="col-sm-4"><canvas id="img15"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck16"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck16" onclick="photo(16)">Access
              to panels for water, eaves storage</label></div><div class="col-sm-4"><canvas
              id="img16"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck17"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck17" onclick="photo(17)">Walls
              are plasterboarded and skirting fitted</label></div><div
            class="col-sm-4"><canvas id="img17"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck18"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck18" onclick="photo(18)">The
              bathroom clad and extraction is then fitted</label></div><div
            class="col-sm-4"><canvas
              id="img18" width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck19"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck19" onclick="photo(19)">Second
              fix, finishes and heating carried out</label></div><div
            class="col-sm-4"><canvas id="img19"
              width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
          <div class="row" style="margin-bottom: 10px">
            <div class="col-sm-1">
              <input type="checkbox" class="form-check-input"
                id="exampleCheck20"></div><div
              class="col"><label class="form-check-label"
              for="exampleCheck20" onclick="photo(10)">Decorating</label></div><div
            class="col-sm-4"><canvas
              id="img20" width="50" height="50">
            </div>
          <div class="col-sm-1"> <input type="checkbox" class="form-check-input"></div><div class="col-sm-2"><label class="form-check-label">Agree</label></div>
          </div>
        </div>




        <div class="container">
          <div class="row" style="margin-bottom: 10px">
            <div class="col-9">
              upload your image showing the loft at the start of fhe contract
            </div>
            <div class="col-3">
              <button id="uploadBtn" class="btn btn-outline-primary"
                type="button"
                onclick="uploadImage()"> Upload Image </button>
              <div>
              </div>
            </div>


          </div>



          <div class="container">
            <div class="row" style="margin-bottom: 10px">
              <div class="col-3">
                <input type="text" class="form-control" placeholder="Image Name"
                  id="imagename" aria-label="imagename"
                  aria-describedby="imagename">
              </div>
              <div class="col-3">
                <button id="docBtn" class="btn btn-outline-primary"
                  type="button"
                  onclick="saveImage()"> Save Image </button>
              </div>
              <div class="col-6">
                <p id="docNameDisplay"></p>
              </div>
            </div>
          </div>
          <div class="container">
            <div class="row" style="margin-bottom: 10px">
              <div class="col-12">
                <p id="message"></p>
              </div>
            </div>
          </div>
          <!-- Optional JavaScript -->
          <!-- jQuery first, then Popper.js, then Bootstrap JS -->
          <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
          <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
          <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
        </body>

      </html>